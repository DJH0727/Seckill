### 秒杀大致过程
1. Redis 缓存要秒杀的商品的库存信息
2. 用户发起秒杀请求
3. 服务器收到秒杀请求，通过lua脚本判断用户是否有资格参与秒杀（比如已经秒杀过，库存是否充足等）
4. Redis 减库存，并将用户信息写入Redis标记用户已经参与秒杀
5. 通过Producer发送订单创建消息给消息队列
6. 消费者从消息队列中获取订单创建消息，并创建订单
7. 订单创建不会马上减少数据库库存，而是通过异步任务定时减库存


用户 → Redis (Lua校验+扣库存+防重复) → MQ发送秒杀消息 → 消费者消费 → 创建订单 → 延迟或异步数据库扣库存

削峰+异步+缓存优先+消息解耦